language: java

sudo: false

cache:
  directories:
    - "$HOME/.m2"

env:
  global:
    - secure: "VatILqFstEE/Bo2AmyPJtQ9goVjA/YCuSODdYImLsz/+VBjSJPF0cuIo48bQ1I6BzKpAT4W4oGltTx6PT/YXvt5SxLQ94Y0BI2JynqH1ANt7DRRtk/x7u9qyfQ+Evzq5e9iNJ7xS7xqSHRHoAb54qPPZ0h3xiLePP2fdGlsJe4P5N/YKnYGCu/tQp2CQ32h6w5zCrBZ5TapJI49gv14Nl2GCLBqRmefEex/L4TaXnhGjFZT7c0W0UqRh/jLLZR3aJe8FOfqnDeAosN/jgiCqkWMBrxYvqacMOM8LnXczsqnMMTPO1R1ygOQTCPli4ICymos2E5ecS1ngnYpgmMrKqB+0YqcCjNP7ZU3M+IsJvU/VrM7QczwtP97KGhz8Cb79A2K4ieMQ8kvr+SPoeDtiV1Le2JeNeYYiKJQqdvqm3a80G6udiL+mgq8jfR4Zb9Kiecuy7OS/WdL5ES6dBEthAwF0WH2qFih+uR+F+KJZN1ViWHW63eOjcDZ/z7FnMlLjxtH/ksVoHodL4+RuNHuOQhig61+jIFu75qMf3nokj0zfGe1YswjehxxyMGWAlQlnWOZYnmhuSOMdJoditQnuwwnL8kVkDSmhk+hGTCkEweRXGt2PTAddxMxgtd0ihNvgFJuvs7mdkY8PwgLoJeKs3NaGtOCdVjoBuE1oFPKi5sY="
    - secure: "P/q+73NPuWuMdVyW34WlUy/HDzhWOlYqLxDP07myJqmCa+nnOEtodBo/6ni/9NJx3Hq/ZMq0TyoIFpr/MdtOdRJJa7tsBty0Wog7rVOmdhUEf5FToCSendcRD14KB41K8lz+F5W/SExWD20EVkDESs9InBCrPcHeIa8NpO58ZsDhrr5LiR6ilMRcSyxwFwSjwy1fwVmS1P7SKW++ccBdwvEqeSJKHGU6p35ZWsMfNY/E54nXCkXFmKJ0waKOTo7f1fNo7ULnwKDhGxLAAJ3YRK+tE/ETdAXvEaJ4U9B/Ck0c6HAMgl3+c2quACOdZb/ch+3+3kITtGYOpu6c2wr+XEISt3YEI0Z1Z7CaEmR2kdK/bOk3CowvXwqWAACN45+Qkej8TFfA4Iyk3Pj82QiFEI3SaBxUZaBmbCd5g8QH+VPenjbC0jA2cXxnVimmR70ihvmnwAAXwPFWHuaNzgPNnP7e8xp29wkX3N4tGRWCfh4mnujnfBokfj/5dUIiYR89QLsXwLMbBbvmVsTrCh7oJCDpFyw/cxIUVawDzrZq6N4ZmDOQMkR2TBfCKj+bn9770RXS2R4JfGQI6LhlgV1mcR6/KdK/FEMTDSZ3WSyjjNonVgyxGBSk2ff7vV8HVFFHEeoR4K7NyurLk1hDmdq0dp+AcIi4iUwIiScE2VtBTTc="
    - secure: "oIOxRELdL5A21YLdbQorKz6qTa2+V/m0H+JwKp4rom04POOapql6lfM7Xt6lWGO95eVgAGQzWdcmTHnyDeWxHdU33sIJHapS8H/J04Wmd94D9TA9LuzJc2RHWfFT+UoLN7FS+zjCG3LHJZT+eU4cIBQf1x6KN/XZ4Oro4caad/Ik9e+q6mLJZdKWkgN1aoleV1JtnCSkkbc+ZRTi6lqnnrJNReG+KxpmJw0xPyKmptVFyfbP73dje9zu1BwYtxSrmuh1oDSNYReHJZLzbk0Vwx9FMJiEv4kuxgtPU6cgHXhzyCPMQd4iv5i6RQqWtOVDF+wyE616R8zRDAt33Eue4uMJFUmPXAd9JszBSV74cfEfA3NTqKwhbtghMlamIQTEL0JHN6g/bvFeQhqf5fI100pb0U8GLGVE2QhjQu433NOOQlsCbjbAPyorCGTzNHieyK6R6BkZtGi8BGkh6MX+GgyR1wJxqw48MTRUHQcnBQ93uvsB4E0I+huH9+Pi3x7mMWHUZeuZGjfAm7W6kvXvjbhOyiI38LYXvGh0wcbygL7keqcPw9M0HMTC5NW/GscrqEYQEtl6xFL/tInTlfVfcHnA7putrTRjbGrGvuMecNJrRs2hluecaw/UsOJjh1YZDV+ufTjXnSR7Bq5CLagh96jy8Acy6wXdZ9AoDXC26KA="
    - secure: "gk+FGKJdTyBHKD+gSYHYqICPC4AhfoCHu/FSFeSlmGuvqumdqzJv8Nc2lY+4NOxRVRidcereUAd+udQuvc68n17QONjzpavG0dwxilCV+8bgnjVN7I/ZTNv8aFOgVK+KPg3IzwyzZSIxMEe0KgIptdRoj/uLd/5FXMT4MkwTrBdvj0SLObLhP+ASjPsj+he0qaCmIzl3ZDU9pvd71xpL+S03C0vdOYF3Wrz/TgZUyOMYK1oyYYRPNkJa5lWPusm0acdptcAp4bKskXZeQTcLDG35z35DI/h9R9YF/vVnmFs68r+dwZ5GIX6fDLq8qTwG6eovCKk5Vi8TZyQ0/uDWL+twvPzcKOeoGUOlmZX18tPY8XalrPts6vJyElokhuL6aTRq6nXau4LV1Bi+dduM8uzNaAbK/PcM9cjN6crNj9Vjm5Bbc6ga82+RBYPyzi3cN7J9oHpazNBbWLD9b+vZxKXGV0b/HFnTp7q1HbqKpIFklKOSlYnhRyQup9U5dRHL1vSPMEY2wv4MKhUtMvNM4ePa6zU8AMecA44HodQfGYUsIxikCbDMtBeSlvM+ITsqyvOgLc88hvxoW/TOgvoT3lzTmJna6SKeKrnkrHbTEH5H+hJimYqvCIFqOuq9f3mjuhs68XlNFVjcf883s9TocHQhyb93AOj5dLYmMW4sBaM="
    - secure: "SVsP2aor+vLI9UeIcgkqVC/hn9Mdd3wWM+tv06JdzlLRU0dNUhZ0WOgsmXD55wjvuT+4N/wF/hb20aRIG0UqrVjqC8wsFz5Tn2kN8bSFqN/4GxQAfhyaEXyRUhBT5bqYbiekJsE9uYDNHnrZm1PHqhKm3bqBFKeK88cV9dynYnX/1TGT2XCcwMWOjA+30If/C9hrU5I059fzXjrqY9UR+jNCAwbScAZ2T8QcN33p2H5PrJiTGtf2vfpDMTFtEonF+OkhCBV6qkTCtJ/hflxw1RYy/dD5rEFsfbpLOrdgKRcnhAoAJXBirPVnJ25HGyKbS3CVfnX1ogJhECWFtU5H78+dBD8PB1RvUNKSgufIhnxFUo/SgmqrBz1hsjl6zUcBxI1pCc+IEQiAm3OGui2RIWCzqW12oAUHzNXfI8VVwOYWJ73hf94DyidihCyX0/pblLX/hceLagt/qICYi72AaR/albYuQDg6h7CtrtFm4mtooCrz5zSuOG53HcQa14l7tEY0i9QlPto29UP58sh555NVGet8gIUCD0ifCy6cEzF52I8m7yMOtBGXZdnx2qa9REympaA7d94O0FuT8KVAwGZeqYh31pstETtrHBYgRVUI/ayPRFkTqyliufFCRYyF5tuwgHVPiB/UvEvu5jVY4n8kDTKq3BDH1yFZo+m0mhI="
    - secure: "lHBEVymL4NBj5yfo0lbYUPbYYAjZnHny2zdWahfJ0oGGL2Wi6nLxQLuj88PHn5zsIlcmq6xcmg1XROQM6k0qkfEKUxo88mUUTVt0y1G7DIV9ko+fECkHlXjIWbhlo1IFDQy8AD+13GWmIlqqloq7g+3LvRAWpHanq22qsYVQXG6TtMgmbki5QZPvtSgVE4SrL5M7NAOleccHifOkLLy4Zt8Vs7BzSE0uQrcMmNWF0Y/GtgVZwrBkgN11FW6SG3ULv9eJYcwgzapYPyQNR4bwQOG0g1JgHXxQtpi6FDRgg3CcQ9q65s6ribc4B2m7oHsuQTzOxwD0zHX7syNOPHuoKnon0AGcd+2ZkLBEXaYiumVx7aTJqIG8mgImThSiHZiFGC4CxeC01d/o0ghr9pyK6bGkYDvdnJ9PyHAtTrfG4GPDphC0V6z3mCsMfHAIhkQn2GSs94hV0voxSM/ZGBLpwhGrKY0+uoRoxBfQ4zvHJZB4pyDQ/yhRaewmR/63Va45f1wJSdq5AyfmxoGQY76Iegkp4vZqKpaVYzXE/voRczAeu+7OnFMpA7oELuAl2PVdT+IETYRSTuXtIvrzHCKScQ5/6sfpTWILw6Ij4PJseAwd6mUuocueHg+YrQujWM3AasengRbIVu7hnZxgvHmYqMf5GbMW5aJoktnLhbyqDmA="
  
addons:
  sonarcloud:
    organization: "arihealth"
    token:
      secure: PJ6aWThLXsycYY7HpA5Uix69YFna0KQD10Q63lUkS50IgmuTC1D0BcVtHMmIyLUozfN1/Ece87ST7DHVAtzv2JDgJOJlVDzz5abiDwEIrkIUYRJT7FTL7neMVAi2kJRm5kdBxk+TViYM5QrD8USmO1OemDlXKujMfXQ/lzX/bLi5Vk7pMoq4dJWWhrCx1pwtIkxuRCQAos6Ad8auLni0Mwc3gWhMsFNXbjS5IhzgLJLIkM/Ua4PdfPjV1gMoHa3ugsZ9QQHIyOoWMc96TWrjxG98+yM1n1heL0EJcbWwy9oNXm1gyH91dSkY3xhE6jffhMwy42KZ9PMrOz0mhWLbPiH/xPdhXmB8U9kE/1po7MiNCYiDjqQksV9YjDjfSmFpDahsYMktGCk3+vImn6N5WnOA5MSayUaMynJdJY8EStzDh0E39WN+AJfXvtJJyVxK4mzGfKbr0FBS8x5dxr19RnTM8RSK3N89bHbawzWU1UCGXJJtHGAZoKcZ6PJyBbt5/jrqfxTn7/CfvSGPZYUdRn/8yuKcMhlczrnhPIQiI5DI9V6YxCS/5UHWVgI/MwAm9S4v2LB1iuv3dOzD7839AA2Zgi2tb0KYXnpHKtqak1DFjHTsQRf9wpHZi9sk0Bghbr7Z9RfQADBYPJ5sF195y901R9tyLbxopc8UYDsvzKM=
      
script:
  - if [ "$TRAVIS_PULL_REQUEST" = "true" ]; then mvn clean test; mvn package -Dmaven.test.skip=true; mvn sonar:sonar; fi
  - if [ "$TRAVIS_BRANCH" = "master" ]; then mvn clean test; mvn sonar:sonar; fi
  - if [ "$TRAVIS_BRANCH" = "release" ]; then chmod +x .travis/prepare.sh && .travis/prepare.sh; mvn -s .travis/settings.xml -B release:clean release:prepare; git push --tags; mvn -s .travis/settings.xml -B release:perform; chmod +x .travis/push.sh && .travis/push.sh; fi

after_success:
- bash <(curl -s https://codecov.io/bash)
